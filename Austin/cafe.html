<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Heatmaps</title>
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
      #panel {
        position: absolute;
        top: 5px;
        left: 50%;
        margin-left: -180px;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=visualization"></script>
    <script>
// Adding 500 Data Points
var map, pointarray, heatmap;

// place_data will be replaced by some lines instantiating placeData

placeData = [
  new google.maps.LatLng(30.2516, -97.754),
  new google.maps.LatLng(30.2682, -97.7269),
  new google.maps.LatLng(30.2877, -97.7455),
  new google.maps.LatLng(30.2211, -97.7569),
  new google.maps.LatLng(30.3187, -97.7245),
  new google.maps.LatLng(30.2648, -97.7442),
  new google.maps.LatLng(30.296, -97.8321),
  new google.maps.LatLng(30.2695, -97.7539),
  new google.maps.LatLng(30.2342, -97.7576),
  new google.maps.LatLng(30.2781, -97.7717),
  new google.maps.LatLng(30.2693, -97.7291),
  new google.maps.LatLng(30.2801, -97.7388),
  new google.maps.LatLng(30.3064, -97.7354),
  new google.maps.LatLng(30.2963, -97.7426),
  new google.maps.LatLng(30.3174, -97.7406),
  new google.maps.LatLng(30.2411, -97.7529),
  new google.maps.LatLng(30.28, -97.721),
  new google.maps.LatLng(30.254, -97.736),
  new google.maps.LatLng(30.261, -97.6978),
  new google.maps.LatLng(30.326, -97.6578),
  new google.maps.LatLng(30.2586, -97.739),
  new google.maps.LatLng(30.3191, -97.7395),
  new google.maps.LatLng(30.3714, -97.7584),
  new google.maps.LatLng(30.2841, -97.7365),
  new google.maps.LatLng(30.2829, -97.7372),
  new google.maps.LatLng(30.2894, -97.7226),
  new google.maps.LatLng(30.222, -97.8374),
  new google.maps.LatLng(30.329, -97.7315),
  new google.maps.LatLng(30.2646, -97.7285),
  new google.maps.LatLng(30.3151, -97.7165),
  new google.maps.LatLng(30.2686, -97.7423),
  new google.maps.LatLng(30.2955, -97.7418),
  new google.maps.LatLng(30.3353, -97.8046),
  new google.maps.LatLng(30.2665, -97.7432),
  new google.maps.LatLng(30.2837, -97.7336),
  new google.maps.LatLng(30.3086, -97.7425),
  new google.maps.LatLng(30.337, -97.8035),
  new google.maps.LatLng(30.2657, -97.7434),
  new google.maps.LatLng(30.2636, -97.7244),
  new google.maps.LatLng(30.3127, -97.7385),
  new google.maps.LatLng(30.2376, -97.7212),
  new google.maps.LatLng(30.3605, -97.7405),
  new google.maps.LatLng(30.2825, -97.7423),
  new google.maps.LatLng(30.2799, -97.7216),
  new google.maps.LatLng(30.2769, -97.742),
  new google.maps.LatLng(30.2337, -97.7423),
  new google.maps.LatLng(30.2643, -97.7277),
  new google.maps.LatLng(30.2648, -97.747),
  new google.maps.LatLng(30.2916, -97.825),
  new google.maps.LatLng(30.2665, -97.7397),
  new google.maps.LatLng(30.2178, -97.7965),
  new google.maps.LatLng(30.2296, -97.8195),
  new google.maps.LatLng(30.2765, -97.7472),
  new google.maps.LatLng(30.2763, -97.749),
  new google.maps.LatLng(30.2843, -97.7183),
  new google.maps.LatLng(30.2684, -97.7256),
  new google.maps.LatLng(30.2473, -97.7508),
  new google.maps.LatLng(30.2879, -97.7469),
  new google.maps.LatLng(30.2855, -97.742),
  new google.maps.LatLng(30.2795, -97.7594),
  new google.maps.LatLng(30.2621, -97.7451),
  new google.maps.LatLng(30.2605, -97.7337),
  new google.maps.LatLng(30.2776, -97.7515),
  new google.maps.LatLng(30.2715, -97.7419),
  new google.maps.LatLng(30.3615, -97.7162),
  new google.maps.LatLng(30.2831, -97.7344),
  new google.maps.LatLng(30.3732, -97.73),
  new google.maps.LatLng(30.2177, -97.69),
  new google.maps.LatLng(30.2314, -97.7879),
  new google.maps.LatLng(30.2449, -97.757),
  new google.maps.LatLng(30.2475, -97.7748),
  new google.maps.LatLng(30.3034, -97.7156),
  new google.maps.LatLng(30.2645, -97.733),
  new google.maps.LatLng(30.2627, -97.744),
  new google.maps.LatLng(30.2966, -97.7073),
  new google.maps.LatLng(30.3026, -97.7385),
  new google.maps.LatLng(30.2561, -97.7116),
  new google.maps.LatLng(30.2489, -97.7695),
  new google.maps.LatLng(30.3277, -97.7395),
  new google.maps.LatLng(30.2732, -97.8005),
  new google.maps.LatLng(30.2774, -97.7425),
  new google.maps.LatLng(30.2659, -97.7417),
  new google.maps.LatLng(30.2794, -97.7601),
  new google.maps.LatLng(30.2779, -97.7729),
  new google.maps.LatLng(30.2322, -97.791),
  new google.maps.LatLng(30.251, -97.7494),
  new google.maps.LatLng(30.3308, -97.732),
  new google.maps.LatLng(30.2226, -97.8424),
  new google.maps.LatLng(30.2878, -97.7426),
  new google.maps.LatLng(30.3561, -97.7577),
  new google.maps.LatLng(30.2654, -97.7387),
  new google.maps.LatLng(30.2362, -97.8218),
  new google.maps.LatLng(30.2897, -97.7403),
  new google.maps.LatLng(30.3506, -97.7219),
  new google.maps.LatLng(30.2466, -97.757),
  new google.maps.LatLng(30.3599, -97.7364),
  new google.maps.LatLng(30.2496, -97.7494),
  new google.maps.LatLng(30.2658, -97.7466),
  new google.maps.LatLng(30.3064, -97.7355),
  new google.maps.LatLng(30.2371, -97.7044),
  new google.maps.LatLng(30.3013, -97.6988),
  new google.maps.LatLng(30.262, -97.7287),
  new google.maps.LatLng(30.2863, -97.7403),
  new google.maps.LatLng(30.2897, -97.7284),
  new google.maps.LatLng(30.3369, -97.7569),
  new google.maps.LatLng(30.267, -97.736),
  new google.maps.LatLng(30.2905, -97.7446),
  new google.maps.LatLng(30.3598, -97.7379),
  new google.maps.LatLng(30.2879, -97.7417),
  new google.maps.LatLng(30.3042, -97.7418),
  new google.maps.LatLng(30.3151, -97.7338),
  new google.maps.LatLng(30.2651, -97.7461),
  new google.maps.LatLng(30.3585, -97.6994),
  new google.maps.LatLng(30.3249, -97.7376),
  new google.maps.LatLng(30.2305, -97.7944),
  new google.maps.LatLng(30.2715, -97.8211),
  new google.maps.LatLng(30.3517, -97.7089),
  new google.maps.LatLng(30.2734, -97.7595),
  new google.maps.LatLng(30.2189, -97.7957),
  new google.maps.LatLng(30.2592, -97.7161),
  new google.maps.LatLng(30.2998, -97.7219),
  new google.maps.LatLng(30.2478, -97.7617),
  new google.maps.LatLng(30.2961, -97.744),
  new google.maps.LatLng(30.3361, -97.7573),
  new google.maps.LatLng(30.3124, -97.7048),
  new google.maps.LatLng(30.3711, -97.7247),
  new google.maps.LatLng(30.2708, -97.7422),
  new google.maps.LatLng(30.33, -97.728),
  new google.maps.LatLng(30.3567, -97.715),
  new google.maps.LatLng(30.3086, -97.7505),
  new google.maps.LatLng(30.3536, -97.7973),
  new google.maps.LatLng(30.268, -97.7494),
  new google.maps.LatLng(30.3043, -97.7265),
  new google.maps.LatLng(30.3222, -97.714),
  new google.maps.LatLng(30.3533, -97.7549),
  new google.maps.LatLng(30.284, -97.7192),
  new google.maps.LatLng(30.2628, -97.7144),
  new google.maps.LatLng(30.2417, -97.7268),
  new google.maps.LatLng(30.3314, -97.81),
  new google.maps.LatLng(30.3009, -97.7403),
  new google.maps.LatLng(30.2334, -97.7915),
  new google.maps.LatLng(30.2465, -97.7568),
  new google.maps.LatLng(30.2606, -97.7418),
  new google.maps.LatLng(30.3033, -97.7447),
  new google.maps.LatLng(30.2801, -97.7595),
  new google.maps.LatLng(30.2333, -97.7648),
  new google.maps.LatLng(30.2342, -97.8288),
  new google.maps.LatLng(30.2924, -97.826),
  new google.maps.LatLng(30.2678, -97.7465),
  new google.maps.LatLng(30.2175, -97.7681),
  new google.maps.LatLng(30.3366, -97.8037),
  new google.maps.LatLng(30.2204, -97.7574),
  new google.maps.LatLng(30.282, -97.7401),
  new google.maps.LatLng(30.256, -97.7464),
  new google.maps.LatLng(30.3151, -97.7418),
  new google.maps.LatLng(30.2798, -97.7196),
  new google.maps.LatLng(30.361, -97.7156),
  new google.maps.LatLng(30.2522, -97.7636),
  new google.maps.LatLng(30.3017, -97.7386),
  new google.maps.LatLng(30.3536, -97.7494),
  new google.maps.LatLng(30.3045, -97.7264),
  new google.maps.LatLng(30.2439, -97.7584),
  new google.maps.LatLng(30.2629, -97.7897),
  new google.maps.LatLng(30.2696, -97.749),
  new google.maps.LatLng(30.2954, -97.7843),
  new google.maps.LatLng(30.2683, -97.745),
  new google.maps.LatLng(30.2912, -97.7415),
  new google.maps.LatLng(30.3228, -97.7124),
  new google.maps.LatLng(30.2839, -97.7758),
  new google.maps.LatLng(30.3418, -97.7392),
  new google.maps.LatLng(30.2828, -97.7756),
  new google.maps.LatLng(30.3593, -97.7417),
  new google.maps.LatLng(30.2686, -97.7422),
  new google.maps.LatLng(30.3327, -97.7602),
  new google.maps.LatLng(30.2624, -97.7418),
  new google.maps.LatLng(30.2671, -97.7456),
  new google.maps.LatLng(30.284, -97.7195),
  new google.maps.LatLng(30.2878, -97.7418),
  new google.maps.LatLng(30.2935, -97.716),
  new google.maps.LatLng(30.3271, -97.7228),
  new google.maps.LatLng(30.3315, -97.8101),
  new google.maps.LatLng(30.2689, -97.7414),
  new google.maps.LatLng(30.2597, -97.7068),
  new google.maps.LatLng(30.2395, -97.8317),
  new google.maps.LatLng(30.2605, -97.7349),
  new google.maps.LatLng(30.2688, -97.7287),
  new google.maps.LatLng(30.2537, -97.7142),
  new google.maps.LatLng(30.2677, -97.7427),
  new google.maps.LatLng(30.2844, -97.7194),
  new google.maps.LatLng(30.2417, -97.7269),
  new google.maps.LatLng(30.3541, -97.7273),
  new google.maps.LatLng(30.3276, -97.7404),
  new google.maps.LatLng(30.2759, -97.8001),
  new google.maps.LatLng(30.2798, -97.7419),
  new google.maps.LatLng(30.2665, -97.7379),
  new google.maps.LatLng(30.2726, -97.7537),
  new google.maps.LatLng(30.2901, -97.7418),
  new google.maps.LatLng(30.2498, -97.7547),
  new google.maps.LatLng(30.2908, -97.7343),
  new google.maps.LatLng(30.2663, -97.7451),
  new google.maps.LatLng(30.3051, -97.7436),
  new google.maps.LatLng(30.2841, -97.7364),
  new google.maps.LatLng(30.3046, -97.7266),
  new google.maps.LatLng(30.2886, -97.723),
  new google.maps.LatLng(30.308, -97.7505),
  new google.maps.LatLng(30.357, -97.7487),
  new google.maps.LatLng(30.3066, -97.7452),
  new google.maps.LatLng(30.2867, -97.7363),
  new google.maps.LatLng(30.2842, -97.7364),
  new google.maps.LatLng(30.2825, -97.7422),
  new google.maps.LatLng(30.3092, -97.7515),
  new google.maps.LatLng(30.2659, -97.7357),
  new google.maps.LatLng(30.2377, -97.7925),
  new google.maps.LatLng(30.3246, -97.7437),
  new google.maps.LatLng(30.3105, -97.7401),
  new google.maps.LatLng(30.3591, -97.7343),
  new google.maps.LatLng(30.2543, -97.7476),
  new google.maps.LatLng(30.2781, -97.7444),
  new google.maps.LatLng(30.268, -97.7419),
  new google.maps.LatLng(30.3575, -97.643),
  new google.maps.LatLng(30.267, -97.7445),
  new google.maps.LatLng(30.3047, -97.7645),
  new google.maps.LatLng(30.272, -97.7396),
  new google.maps.LatLng(30.2719, -97.7411),
  new google.maps.LatLng(30.2652, -97.7485),
  new google.maps.LatLng(30.3059, -97.708),
  new google.maps.LatLng(30.2322, -97.791),
  new google.maps.LatLng(30.2863, -97.7394),
  new google.maps.LatLng(30.2956, -97.7418),
  new google.maps.LatLng(30.2814, -97.7653),
  new google.maps.LatLng(30.2669, -97.7452),
  new google.maps.LatLng(30.3691, -97.7408),
  new google.maps.LatLng(30.2607, -97.747),
  new google.maps.LatLng(30.367, -97.6961),
  new google.maps.LatLng(30.2318, -97.7356),
  new google.maps.LatLng(30.264, -97.7287),
  new google.maps.LatLng(30.2624, -97.7617),
  new google.maps.LatLng(30.2573, -97.8072),
  new google.maps.LatLng(30.2949, -97.7429),
  new google.maps.LatLng(30.2655, -97.7404),
  new google.maps.LatLng(30.2497, -97.7553),
  new google.maps.LatLng(30.3138, -97.7199),
  new google.maps.LatLng(30.2683, -97.7068),
  new google.maps.LatLng(30.3336, -97.8229),
  new google.maps.LatLng(30.3125, -97.7386),
  new google.maps.LatLng(30.2767, -97.7521),
  new google.maps.LatLng(30.2861, -97.7369),
  new google.maps.LatLng(30.3546, -97.7565),
  new google.maps.LatLng(30.2727, -97.7564),
  new google.maps.LatLng(30.2957, -97.7429),
  new google.maps.LatLng(30.2664, -97.7436),
  new google.maps.LatLng(30.2628, -97.7575),
];

viewCenter = new google.maps.LatLng(30.2975, -97.7272);

function initialize() {
  var mapOptions = {
    zoom: 13,
    center: viewCenter,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  var pointArray = new google.maps.MVCArray(placeData);

  heatmap = new google.maps.visualization.HeatmapLayer({
    data: pointArray
  });

  heatmap.setMap(map);
}

function toggleHeatmap() {
  heatmap.setMap(heatmap.getMap() ? null : map);
}

function changeGradient() {
  var gradient = [
    'rgba(0, 255, 255, 0)',
    'rgba(0, 255, 255, 1)',
    'rgba(0, 191, 255, 1)',
    'rgba(0, 127, 255, 1)',
    'rgba(0, 63, 255, 1)',
    'rgba(0, 0, 255, 1)',
    'rgba(0, 0, 223, 1)',
    'rgba(0, 0, 191, 1)',
    'rgba(0, 0, 159, 1)',
    'rgba(0, 0, 127, 1)',
    'rgba(63, 0, 91, 1)',
    'rgba(127, 0, 63, 1)',
    'rgba(191, 0, 31, 1)',
    'rgba(255, 0, 0, 1)'
  ]
  heatmap.set('gradient', heatmap.get('gradient') ? null : gradient);
}

function changeRadius() {
  heatmap.set('radius', heatmap.get('radius') ? null : 20);
}

function changeOpacity() {
  heatmap.set('opacity', heatmap.get('opacity') ? null : 0.2);
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>

  <body>
    <div id="panel">
      <button onclick="toggleHeatmap()">Toggle Heatmap</button>
      <button onclick="changeGradient()">Change gradient</button>
      <button onclick="changeRadius()">Change radius</button>
      <button onclick="changeOpacity()">Change opacity</button>
    </div>
    <div id="map-canvas"></div>
  </body>
</html>
